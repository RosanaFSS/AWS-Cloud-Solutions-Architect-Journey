<h3>PROZ AWS Arquitet@s Program</h3><br>

<p>October 27 2024<br></p>
<h1><code><em>Amazon EC2</em></code> Backup and Restore using <code><em>AWS Backup</em></code>.</h1><br>

<p>Hey there, fellow lifelong learner! I´m <a href="https://www.linkedin.com/in/rosanafssantos/">Rosana</a>, and I’m genuinely excited to join you on this adventure.<br>
It´s key part of my AWS hands-on journey.<br>
Let´s get started!!<br>


<h2>Project Goals</h2>
<p>In this tutorial, we will:
<ul style="list-style-type:square">
    <li>create an on-demand backup job of an Amazon EC2 instance.</li>
    <li>use a backup plan to back up Amazon EC2 resources—using a backup plan within AWS Backup lets you automate your backups on a schedule.</li>
    <li>add resources to an existing backup plan using tags</li>
</ul></p>

<h2>Prerequisites</h2>
<p>We will need the following resources or permissions to proceed:
<ul style="list-style-type:square">
    <li>an AWS account.</li>
    <li>one or more Amazon EC2 instaces.</li>
    <li>IAM roles used by AWS Backup to create a backup of the Amazon EC2 instance.</li>
</ul></p>

<h2>0     - create one or more Amazon EC2 instance</code></h2>

![image](https://github.com/user-attachments/assets/117acb6a-dde8-4d39-9074-abf341e9829b)

<br>

![image](https://github.com/user-attachments/assets/106cecc0-fbd8-493f-b6cd-654b8a25c78a)

<br>

i-rosana-0acdf9e99v0079ffb23

![image](https://github.com/user-attachments/assets/0ffc405b-f9de-404d-a714-df144ffc1b17)

<br>

![image](https://github.com/user-attachments/assets/500feddd-6787-481c-adaf-b9cbfa1a466d)

<br>

Key-Pair: key-pair-0acdf9e99v0079ffb23.pem
Security Group: proj-rosa-oct-27-0acdf9e99v0079ffb23
Description: proj-ros-oct-27-2024

![image](https://github.com/user-attachments/assets/eb4d42cd-3e39-47b3-b509-7d9530854973)

<br>

![image](https://github.com/user-attachments/assets/28293916-fb38-4258-aab6-726b7e9c57cd)

<br>

![image](https://github.com/user-attachments/assets/6ffcf605-4410-479f-a2ba-ed14b97c114c)





<h2>1     - access <code>AWS Management console</code> and <code>AWS Backup console</code></h2>
<p>Log in to the <a href="https://console.aws.amazon.com/">Amazon Management console</a> (with your credentials), and open the <a href="https://console.aws.amazon.com/backup">Amazon Backup console</a> </p>

![image](https://github.com/user-attachments/assets/0f041f0a-23e6-4a84-adf9-06e58d1e4b3b)

<br>

![image](https://github.com/user-attachments/assets/1e8ed02d-1a92-454c-8cbb-552edc93c7e8)

<br>

<h2>2     - configure on and-demand AWS Backup job of an Amazon EC2 instance</h2>
<h3>2.1   - configure the services used with AWS Backup</h3>

<p>in the navigation pane on the left side of the AWS Backup console, under My account, choose Settings.</p>

<p>on the Service opt-in page, choose Configure resources.</p>

<p>on the Configure resources page, use the toggle switches to enable or disable the services used with AWS Backup. In this case, select EC2. Choose Confirm when your services are configured.<br>
AWS resources that you're backing up should be in the Region you are using for this tutorial, and resources must all be in the same AWS Region (however, see step 3.2 for information on Cross-Region Copy).</p>

![image](https://github.com/user-attachments/assets/fa77eb6d-1c96-4803-b353-4d23183c4997)

<h3>2.2   - on the Service opt-in page, choose Configure resources.</h3>

<p>back in the AWS Backup console, under My account in the left navigation pane, select Protected resources.</p>

![image](https://github.com/user-attachments/assets/373e47ea-7f98-403f-b920-4c09678d066a)

<p>from the dashboard, choose the Create on-demand backup button.</p>

![image](https://github.com/user-attachments/assets/aa679843-5bc4-4965-96f8-560e0d6039b9)

<p>on the Create on-demand backup page, choose the following options:</p>
<ul style="list-style-type:square">
    <li>Select the resource type that you want to back up; for example, choose EC2 for Amazon EC2.</li>
    <li>Choose the Instance ID of the EC2 resource that you want to protect.</li>
    <li>Ensure that Create backup now is selected. This initiates your backup job immediately and enables you to see your saved resource sooner on the Protected resources page.</li>
    <li>Select the desired retention period. AWS Backup automatically deletes your backups at the end of this period to save storage costs for you.</li>
    <li>Choose an existing backup vault. Choosing Create new Backup vault opens a new page to create a vault and then returns you to the Create on-demand backup page when you are finished.</li>
    <li>Under IAM role, choose Default role. Note: If the AWS Backup Default role is not present in your account, then an AWS Backup Default role is created with the correct permissions.</li>
    <li>Choose the Create on-demand backup button. This takes you to the Jobs page, where you will see a list of jobs..</li>
</ul></p>

<p>choose the Backup job ID for the resource that you chose to back up to see the details of that job.</p>



<h2>3     - configure an automatic AWS Backup job of an Amazon EC2 instance</h2>
<h3>3.1   - configure the services used with AWS Backup</h3>
<h3>3.2   - configure a backup plan for an Amazon EC2 instance</h3>
<h3>3.3   - assign resources to the backup plan</h3>

<h2>4     - restore and Amazon EC2 instance using AWS Backup</h2>
<h3>4.1   - Navigate to the backup vault that was selected in the backup plan and select the latest completed backup.</h3>
<h3>4.2   - To restore the EC2 instance, select the recovery point ARN and choose Restore.</h3>
<h3>4.3   - The restore of the ARN will bring you to a Restore backup screen that will have the configurations for the EC2 instance using the backed-up AMI and all the attached EBS volumes.</h3>
<ul style="list-style-type:square">
    <li>In the Network settings pane, accept the defaults or specify the options for the Instance type, Virtual Private Cloud (VPC), Subnet, Security groups, and Instance IAM role settings.</li>
    <li>This example proceeds with no IAM role. The IAM role can be applied to the EC2 instance after the restore process is completed.</li>
</ul></p>
<h3>4.4   - In the Restore role pane, accept the Default role or Choose an IAM role to specify the IAM role that AWS Backup will assume for this restore.</h3>
<h3>4.5   - In the Advanced settings pane, accept the defaults or specify the options for Shutdown behavior, Stop - Hibernate behavior, Placement group, T2/T3 Unlimited, Tenancy, and User data settings. This section is used to customize shutdown and hibernation behavior, termination protection, placement groups, tenancy, and other advanced settings.</h3>
<h3>4.6   - AWS Backup will use the SSH key pair used at the time of backup to automatically perform your restore.</h3>
<h3>4.7   - After specifying all of your settings, choose Restore backup. The Restore jobs pane will appear, and a message at the top of the page will provide information about the restore job.</h3>
<h3>4.8   - Check for your restored backup job under Restore jobs in the the AWS Backup console.</h3>
<h3>4.9   - I. Once the job status appears as completed, navigate to the Amazon EC2 console and select Instances in the left navigation pane to see the restored EC2 instance. The EC2 instance is restored using the backup of the AMI and the attached EBS volume.</h3>


<h2>5   -  next steps</h2>

<h2>6   - clean Up</h2>

<h2>Conclusion</h2>
<p>Congratulations! We did it! We created a backup of an Amazon EC2 instance and performed a restore using AWS Backup.</p>



<pre><code>aws configure set region sa-east-1</code></pre>


